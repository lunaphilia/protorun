# アクティブコンテキスト

## 現在の焦点
- 新しいプログラミング言語「Protorun」の設計と実装
- 言語仕様の詳細化と形式化
- 実装計画の策定
- サンプルコードの充実

## 最近の変更
- 言語の基本コンセプトの確立
- 型システム、関数型パラダイム、メモリ安全性の統合アプローチの検討
- 代数的効果と所有権システムの統合設計
- トレイトとデータ型の継承に関する検討と決定
- nullの排除とOption/Result型の導入
- リソース型と効果スコープの導入
- 関数合成のサポート強化（パイプライン演算子、関数合成演算子、do記法）
- サンプルコードの更新と充実（calculator.pr, state_counter.pr, ownership_example.pr）
- 制御構造の検討と決定（if式とmatch式の両方を維持）
- 設計決定の文書化（docs/design-decisions/control-structures.md）
- 実装計画の詳細化（docs/implementation-plan.md）
- 言語仕様の改善：
  - リソース効果の言語レベルサポート（resource effect構文）
  - リソースパターン型クラス（Resource<R>型クラス）
  - コンテキストリソース（context resource構文）
  - 効果ローカライゼーション（local effect構文）
  - 所有権を考慮した効果（ownキーワード）
  - 文法の拡張（新しい構文要素をEBNF文法に追加）

## 次のステップ
- 言語仕様の継続的な改善と形式化
- コンパイラ/インタープリタの実装計画の詳細化
- 開発環境のセットアップ
- プロトタイプ実装の開始
- 型推論、効果推論、所有権推論の相互作用の詳細設計
- 標準ライブラリの設計と仕様策定
- EBNF文法の完全な形式化

## アクティブな決定事項
- 言語名：Protorun
- 主要パラダイム：関数型プログラミングとメモリ安全性の統合
- 型システム：強力な静的型付けと型推論
- 効果システム：代数的効果による副作用の制御
- 所有権モデル：Rustに似た所有権と借用の概念
- 継承システム：トレイトの単一継承のみをサポート、データ型の継承を制限
- nullの排除：値の存在/不在はOption型で表現
- リソース型：自動リソース管理のためのリソース型
- 効果スコープ：効果の局所的な使用のためのwith式
- 関数合成：パイプライン演算子と関数合成演算子の導入
- 制御構造：if式とmatch式の両方を維持（それぞれ異なる用途に最適化）
- 実装アプローチ：段階的実装（インタープリタから始め、徐々にコンパイラ機能を追加）
- リソース効果：リソース管理と効果システムの統合
- コンテキストリソース：暗黙的なコンテキスト渡しの仕組み
