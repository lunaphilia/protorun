# 1. 序論

Protorun（プロトラン）は、関数型プログラミング、強力な型システム、メモリ安全性を統合した新しいプログラミング言語です。Scala、Haskell、Rustなどの言語から優れた特性を取り入れつつ、より統合的なアプローチを目指しています。

## 1.1 設計理念

Protorunは以下の設計理念に基づいています：

- **安全性**: 強力な型システムと所有権モデルによるメモリ安全性
- **表現力**: 関数型プログラミングパラダイムと代数的データ型
- **制御性**: 代数的効果による副作用の型安全な制御
- **シンプルさ**: 学習しやすく、読みやすい構文と強力な型推論
- **効率性**: 高性能な実行と予測可能なリソース使用

## 1.2 コア機能の優先順位

Protorunの設計では、以下の機能を優先しています：

1. **代数的効果システム**: 副作用を型レベルで追跡し制御するメカニズム
2. **所有権モデル**: メモリ安全性を静的に保証するメカニズム
3. **強力な型システム**: 静的型付けと型推論による安全性
4. **代数的データ型**: データのモデリングのための表現力豊かな型

# 2. 字句構造

## 2.1 キーワード

```
fn       let      var      if       else     match    case
return   for      while    in       trait    impl     type
effect   try      catch    throw    with     enum     do
module   import   pub      as       own      managed  cleanup
handler  resume   noresume multiresume
```

注意: 以前のバージョンから、`resource`, `release`, `context`, `local`, `acquire`のキーワードは削除され、一部は`managed`や`cleanup`などに統合されました。また、効果ハンドラの実装のために`handler`, `resume`, `noresume`, `multiresume`のキーワードが追加されました。

## 2.2 演算子

```
+  -  *  /  %  =  ==  !=  <  >  <=  >=  &&  ||  !  &  |  ^  ~  <<  >>
->  =>  ::  .  ,  ;  :  ..  ...  +=  -=  *=  /=  %=  &=  |=  ^=
|>  |>* >>>  >>>*
```

## 2.3 リテラル

```
整数: 42, 0xFF, 0b1010, 1_000_000
浮動小数点: 3.14, 1e10, 1.2e-3
文字列: "hello", """複数行文字列"""
文字: 'a', '\n', '\u{1F600}'
ブール: true, false
単位: ()
```

注意: Protorun言語では`null`リテラルは存在しません。値の存在/不在はOption型で表現します。

## 2.4 コメント

```
// 単一行コメント

/*
 * 複数行
 * コメント
 */

/// ドキュメントコメント（関数や型の直前に記述）
